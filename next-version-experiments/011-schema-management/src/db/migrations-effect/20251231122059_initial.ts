// This file was autogenerated by `migrate.ts` based on `src/db/migrations-sql/20251231122059_initial.sql`
import { Effect } from "effect";
import { SqlClient } from "@effect/sql";

export default Effect.gen(function* () {
  const sql = yield* SqlClient.SqlClient;
  yield* sql`-- Create "user" table
CREATE TABLE \`user\` (
  \`id\` text NOT NULL,
  \`name\` text NOT NULL,
  \`email\` text NOT NULL,
  \`emailVerified\` integer NOT NULL,
  \`image\` text NULL,
  \`createdAt\` date NOT NULL,
  \`updatedAt\` date NOT NULL,
  PRIMARY KEY (\`id\`)
)`;

  yield* sql`-- Create index "user_email" to table: "user"
CREATE UNIQUE INDEX \`user_email\` ON \`user\` (\`email\`)`;

  yield* sql`-- Create "session" table
CREATE TABLE \`session\` (
  \`id\` text NOT NULL,
  \`expiresAt\` date NOT NULL,
  \`token\` text NOT NULL,
  \`createdAt\` date NOT NULL,
  \`updatedAt\` date NOT NULL,
  \`ipAddress\` text NULL,
  \`userAgent\` text NULL,
  \`userId\` text NOT NULL,
  PRIMARY KEY (\`id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`userId\`) REFERENCES \`user\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "session_token" to table: "session"
CREATE UNIQUE INDEX \`session_token\` ON \`session\` (\`token\`)`;

  yield* sql`-- Create index "session_userId_idx" to table: "session"
CREATE INDEX \`session_userId_idx\` ON \`session\` (\`userId\`)`;

  yield* sql`-- Create "account" table
CREATE TABLE \`account\` (
  \`id\` text NOT NULL,
  \`accountId\` text NOT NULL,
  \`providerId\` text NOT NULL,
  \`userId\` text NOT NULL,
  \`accessToken\` text NULL,
  \`refreshToken\` text NULL,
  \`idToken\` text NULL,
  \`accessTokenExpiresAt\` date NULL,
  \`refreshTokenExpiresAt\` date NULL,
  \`scope\` text NULL,
  \`password\` text NULL,
  \`createdAt\` date NOT NULL,
  \`updatedAt\` date NOT NULL,
  PRIMARY KEY (\`id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`userId\`) REFERENCES \`user\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "account_userId_idx" to table: "account"
CREATE INDEX \`account_userId_idx\` ON \`account\` (\`userId\`)`;

  yield* sql`-- Create "verification" table
CREATE TABLE \`verification\` (
  \`id\` text NOT NULL,
  \`identifier\` text NOT NULL,
  \`value\` text NOT NULL,
  \`expiresAt\` date NOT NULL,
  \`createdAt\` date NOT NULL,
  \`updatedAt\` date NOT NULL,
  PRIMARY KEY (\`id\`)
)`;

  yield* sql`-- Create index "verification_identifier_idx" to table: "verification"
CREATE INDEX \`verification_identifier_idx\` ON \`verification\` (\`identifier\`)`;

  yield* sql`-- Create "user_profiles" table
CREATE TABLE \`user_profiles\` (
  \`user_id\` text NOT NULL,
  \`handle\` text NOT NULL,
  \`name\` text NOT NULL,
  \`bio\` json NULL,
  \`location\` text NULL,
  \`photo_id\` text NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  CONSTRAINT \`0\` FOREIGN KEY (\`photo_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE SET NULL,
  CONSTRAINT \`1\` FOREIGN KEY (\`user_id\`) REFERENCES \`user\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "user_profiles_user_id" to table: "user_profiles"
CREATE UNIQUE INDEX \`user_profiles_user_id\` ON \`user_profiles\` (\`user_id\`)`;

  yield* sql`-- Create index "user_profiles_handle" to table: "user_profiles"
CREATE UNIQUE INDEX \`user_profiles_handle\` ON \`user_profiles\` (\`handle\`)`;

  yield* sql`-- Create index "idx_user_profiles_handle" to table: "user_profiles"
CREATE INDEX \`idx_user_profiles_handle\` ON \`user_profiles\` (\`handle\`)`;

  yield* sql`-- Create "tags" table
CREATE TABLE \`tags\` (
  \`handle\` text NOT NULL,
  \`names\` json NOT NULL,
  \`description\` json NULL,
  \`category\` text NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL
)`;

  yield* sql`-- Create index "tags_handle" to table: "tags"
CREATE UNIQUE INDEX \`tags_handle\` ON \`tags\` (\`handle\`)`;

  yield* sql`-- Create index "idx_tags_handle" to table: "tags"
CREATE INDEX \`idx_tags_handle\` ON \`tags\` (\`handle\`)`;

  yield* sql`-- Create "images" table
CREATE TABLE \`images\` (
  \`sanity_id\` text NOT NULL,
  \`label\` text NULL,
  \`hotspot\` json NULL,
  \`crop\` json NULL,
  \`metadata\` json NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`submitted_by_user_profile_id\` text NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`submitted_by_user_profile_id\`) REFERENCES \`user_profiles\` (\`id\`) ON UPDATE NO ACTION ON DELETE NO ACTION
)`;

  yield* sql`-- Create index "images_sanity_id" to table: "images"
CREATE UNIQUE INDEX \`images_sanity_id\` ON \`images\` (\`sanity_id\`)`;

  yield* sql`-- Create "image_credits" table
CREATE TABLE \`image_credits\` (
  \`image_id\` integer NOT NULL,
  \`order_index\` integer NOT NULL,
  \`credit_line\` text NULL,
  \`credit_url\` text NULL,
  \`user_profile_id\` integer NULL,
  PRIMARY KEY (\`image_id\`, \`order_index\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`user_profile_id\`) REFERENCES \`user_profiles\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`image_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_varieties" table
CREATE TABLE \`vegetable_varieties\` (
  \`vegetable_id\` text NOT NULL,
  \`handle\` text NOT NULL,
  \`names\` json NOT NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "vegetable_varieties_handle" to table: "vegetable_varieties"
CREATE UNIQUE INDEX \`vegetable_varieties_handle\` ON \`vegetable_varieties\` (\`handle\`)`;

  yield* sql`-- Create index "idx_vegetable_varieties_handle" to table: "vegetable_varieties"
CREATE INDEX \`idx_vegetable_varieties_handle\` ON \`vegetable_varieties\` (\`handle\`)`;

  yield* sql`-- Create "vegetable_variety_photos" table
CREATE TABLE \`vegetable_variety_photos\` (
  \`variety_id\` text NOT NULL,
  \`image_id\` text NOT NULL,
  \`order_index\` integer NULL,
  PRIMARY KEY (\`variety_id\`, \`image_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`image_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`variety_id\`) REFERENCES \`vegetable_varieties\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetables" table
CREATE TABLE \`vegetables\` (
  \`scientific_names\` json NULL,
  \`development_cycle_min\` integer NULL,
  \`development_cycle_max\` integer NULL,
  \`height_min\` real NULL,
  \`height_max\` real NULL,
  \`temperature_min\` real NULL,
  \`temperature_max\` real NULL,
  \`content\` json NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL,
  \`main_photo_id\` integer NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`main_photo_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE SET NULL
)`;

  yield* sql`-- Create "vegetable_translations" table
CREATE TABLE \`vegetable_translations\` (
  \`vegetable_id\` integer NOT NULL,
  \`locale\` text NOT NULL,
  \`handle\` text NOT NULL,
  \`names\` json NOT NULL,
  \`searchable_names\` text NULL,
  \`gender\` text NULL,
  \`origin\` text NULL,
  \`content\` json NULL,
  PRIMARY KEY (\`vegetable_id\`, \`locale\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "vegetable_translations_locale_handle" to table: "vegetable_translations"
CREATE UNIQUE INDEX \`vegetable_translations_locale_handle\` ON \`vegetable_translations\` (\`locale\`, \`handle\`)`;

  yield* sql`-- Create index "idx_vegetables_handle" to table: "vegetable_translations"
CREATE INDEX \`idx_vegetables_handle\` ON \`vegetable_translations\` (\`handle\`)`;

  yield* sql`-- Create index "idx_vegetables_searchable_names" to table: "vegetable_translations"
CREATE INDEX \`idx_vegetables_searchable_names\` ON \`vegetable_translations\` (\`searchable_names\`)`;

  yield* sql`-- Create "vegetable_strata" table
CREATE TABLE \`vegetable_strata\` (
  \`vegetable_id\` text NOT NULL,
  \`stratum\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_planting_methods" table
CREATE TABLE \`vegetable_planting_methods\` (
  \`vegetable_id\` text NOT NULL,
  \`method\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_edible_parts" table
CREATE TABLE \`vegetable_edible_parts\` (
  \`vegetable_id\` text NOT NULL,
  \`part\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_lifecycles" table
CREATE TABLE \`vegetable_lifecycles\` (
  \`vegetable_id\` text NOT NULL,
  \`lifecycle\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_uses" table
CREATE TABLE \`vegetable_uses\` (
  \`vegetable_id\` text NOT NULL,
  \`use\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_photos" table
CREATE TABLE \`vegetable_photos\` (
  \`vegetable_id\` text NOT NULL,
  \`image_id\` text NOT NULL,
  \`order_index\` integer NULL,
  PRIMARY KEY (\`vegetable_id\`, \`image_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`image_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "vegetable_photo_metadata" table
CREATE TABLE \`vegetable_photo_metadata\` (
  \`image_id\` text NULL,
  \`category\` text NOT NULL,
  \`description\` json NULL,
  \`approval_status\` text NULL DEFAULT 'PENDING',
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  PRIMARY KEY (\`image_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`image_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CHECK (
    approval_status IN ('PENDING', 'APPROVED', 'REJECTED')
  )
)`;

  yield* sql`-- Create "vegetable_friendships" table
CREATE TABLE \`vegetable_friendships\` (
  \`vegetable_id\` text NOT NULL,
  \`friend_id\` text NOT NULL,
  \`unique_key\` text NOT NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`friend_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CHECK (vegetable_id < friend_id)
)`;

  yield* sql`-- Create index "vegetable_friendships_unique_key" to table: "vegetable_friendships"
CREATE UNIQUE INDEX \`vegetable_friendships_unique_key\` ON \`vegetable_friendships\` (\`unique_key\`)`;

  yield* sql`-- Create "user_wishlists" table
CREATE TABLE \`user_wishlists\` (
  \`user_profile_id\` text NOT NULL,
  \`vegetable_id\` text NOT NULL,
  \`status\` text NOT NULL,
  PRIMARY KEY (\`user_profile_id\`, \`vegetable_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`user_profile_id\`) REFERENCES \`user_profiles\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "notes" table
CREATE TABLE \`notes\` (
  \`handle\` text NOT NULL,
  \`publish_status\` text NULL,
  \`published_at\` text NULL DEFAULT (datetime('now')),
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NOT NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`created_by_id\`) REFERENCES \`user_profiles\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create index "notes_handle" to table: "notes"
CREATE UNIQUE INDEX \`notes_handle\` ON \`notes\` (\`handle\`)`;

  yield* sql`-- Create index "idx_notes_handle" to table: "notes"
CREATE INDEX \`idx_notes_handle\` ON \`notes\` (\`handle\`)`;

  yield* sql`-- Create "note_translations" table
CREATE TABLE \`note_translations\` (
  \`note_id\` integer NOT NULL,
  \`locale\` text NOT NULL,
  \`content\` json NOT NULL,
  \`content_plain_text\` text NULL DEFAULT '',
  \`translated_at\` text NULL DEFAULT (datetime('now')),
  \`original_content_hash\` text NOT NULL,
  \`translation_source\` text NOT NULL,
  \`original_locale\` text NOT NULL,
  PRIMARY KEY (\`note_id\`, \`locale\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`note_id\`) REFERENCES \`notes\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "note_tags" table
CREATE TABLE \`note_tags\` (
  \`note_id\` text NOT NULL,
  \`tag_id\` text NOT NULL,
  PRIMARY KEY (\`note_id\`, \`tag_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`tag_id\`) REFERENCES \`tags\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`note_id\`) REFERENCES \`notes\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "note_vegetables" table
CREATE TABLE \`note_vegetables\` (
  \`note_id\` text NOT NULL,
  \`vegetable_id\` text NOT NULL,
  PRIMARY KEY (\`note_id\`, \`vegetable_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`note_id\`) REFERENCES \`notes\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "edit_suggestions" table
CREATE TABLE \`edit_suggestions\` (
  \`vegetable_id\` text NOT NULL,
  \`diff\` json NOT NULL,
  \`snapshot\` json NOT NULL,
  \`status\` text NOT NULL,
  \`reviewed_by_id\` text NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`reviewed_by_id\`) REFERENCES \`user_profiles\` (\`id\`) ON UPDATE NO ACTION ON DELETE SET NULL,
  CONSTRAINT \`1\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "resources" table
CREATE TABLE \`resources\` (
  \`handle\` text NOT NULL,
  \`url\` text NOT NULL,
  \`format\` text NOT NULL,
  \`thumbnail_id\` text NULL,
  \`created_at\` text NULL DEFAULT (datetime('now')),
  \`updated_at\` text NULL DEFAULT (datetime('now')),
  \`created_by_id\` text NULL,
  CONSTRAINT \`0\` FOREIGN KEY (\`thumbnail_id\`) REFERENCES \`images\` (\`id\`) ON UPDATE NO ACTION ON DELETE SET NULL
)`;

  yield* sql`-- Create index "resources_handle" to table: "resources"
CREATE UNIQUE INDEX \`resources_handle\` ON \`resources\` (\`handle\`)`;

  yield* sql`-- Create index "resources_url" to table: "resources"
CREATE UNIQUE INDEX \`resources_url\` ON \`resources\` (\`url\`)`;

  yield* sql`-- Create index "idx_resources_handle" to table: "resources"
CREATE INDEX \`idx_resources_handle\` ON \`resources\` (\`handle\`)`;

  yield* sql`-- Create "resource_translations" table
CREATE TABLE \`resource_translations\` (
  \`resource_id\` integer NOT NULL,
  \`locale\` text NOT NULL,
  \`title\` text NOT NULL,
  \`description\` json NULL,
  \`credit_line\` text NULL,
  \`translated_at\` text NULL DEFAULT (datetime('now')),
  \`original_content_hash\` text NOT NULL,
  \`translation_source\` text NOT NULL,
  \`original_locale\` text NOT NULL,
  PRIMARY KEY (\`resource_id\`, \`locale\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`resource_id\`) REFERENCES \`resources\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "resource_tags" table
CREATE TABLE \`resource_tags\` (
  \`resource_id\` text NOT NULL,
  \`tag_id\` text NOT NULL,
  PRIMARY KEY (\`resource_id\`, \`tag_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`tag_id\`) REFERENCES \`tags\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`resource_id\`) REFERENCES \`resources\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;

  yield* sql`-- Create "resource_vegetables" table
CREATE TABLE \`resource_vegetables\` (
  \`resource_id\` text NOT NULL,
  \`vegetable_id\` text NOT NULL,
  \`order_index\` integer NULL,
  PRIMARY KEY (\`resource_id\`, \`vegetable_id\`),
  CONSTRAINT \`0\` FOREIGN KEY (\`vegetable_id\`) REFERENCES \`vegetables\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT \`1\` FOREIGN KEY (\`resource_id\`) REFERENCES \`resources\` (\`id\`) ON UPDATE NO ACTION ON DELETE CASCADE
)`;
});
